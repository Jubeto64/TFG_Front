{% extends 'base.html' %} {% block title %} Relatorio {% endblock %} {% block content %}
<div class="offset-1 col-10 list-div">
    <h1 id='name' style="text-align: center">Relatório de Naturezas de Exame</h1>
    <br>
    <form method="get" id='search-form'>
        <input type="date" id="dataini" name="dataini" placeholder="Data de início" value="{{request.GET.dataini}}">
        <input type="date" id="datafim" name="datafim" placeholder="Data de fim" value="{{request.GET.datafim}}">
        <input type="radio" value='All' id="all" checked="checked" name='Qtde' onclick="Checkradiobutton()"> Todos
        <input type="radio" value='Ten' id="ten" name='Qtde' onclick="Checkradiobutton()"> Top 10
        <input type="radio" name="Qtde" id="other" value="Other" onclick="Checkradiobutton()" /> Uma natureza:
        <input type="text" id="uma" placeholder="Descrição da Natureza" name="uma" disabled='true' />
        <i id="search-btn" class="bi bi-search "></i>
    </form>
    <br>
    <div id="container" style="width: 100%;">
        <canvas id="natureza-chart"></canvas>
    </div>
</div>

<script>
    console.log(jQuery.parseJSON('{{labels|safe}}'))
    labels = jQuery.parseJSON('{{labels|safe}}')
    data = jQuery.parseJSON('{{data|safe}}')
    var ctx = document.getElementById("natureza-chart");
    var naturezaChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Qtde de Registros',
                backgroundColor: '#3d3b8e',
                data: data
            }]
        },
        options: {
            responsive: true,
            legend: {
                position: 'top',
            },
            title: {
                display: true,
                text: 'Gráfico de Unidade de Exame'
            }
        }
    });

    function Checkradiobutton() {
        if (document.getElementById('all').checked || document.getElementById('ten').checked) {

            document.getElementById('uma').disabled = true;
        } else {
            document.getElementById('uma').disabled = false;
        }
    }
</script>

{% endblock %}